# Техническое решение проекта «CompactURL» (Сервис сокращения URL)

## 1. Введение

### 1.1. Назначение и цели проекта
**CompactURL** — это прототип высоконагруженного распределённого веб-сервиса для сокращения длинных URL-адресов. Основная цель — демонстрация практического применения ключевых концепций распределённых систем на примере реальной задачи, требующей горизонтального масштабирования.

**Основные задачи:**
- Создание отказоустойчивой системы, способной обрабатывать высокие нагрузки на запись (создание коротких ссылок) и чтение (редирект).
- Реализация механизма шардирования данных для распределения нагрузки.
- Решение проблемы генерации глобально уникальных идентификаторов в распределённой среде.
- Обеспечение высокой доступности и минимальной задержки при редиректе.

**Основания для разработки:** : Учебный проект в рамках курса «Основы распределенных вычислений». Проект демонстрирует практическую ценность применения шардирования данных для распределения нагрузки на сервер

### 1.2. Команда разработки

  | Роль                           | ФИО                          |
|--------------------------------|------------------------------|
| Team Lead, Fullstack Developer | Кирющенков Александр Евгеньевич |
| Backend Developer     | Шарипов Анушервон Абдусаторович     |
| Fullstack Developer     | Пахнушева Алёна Вадимовна |


## 2. Глоссарий

| Термин | Определение |
|--------|-------------|
| **Длинный URL** | Оригинальный длинный URL-адрес, который пользователь хочет сократить |
| **Короткий код** | Уникальная последовательность символов, идентифицирующая сокращённую ссылку |
| **Короткая ссылка** | Полный URL, состоящий из домена сервиса и короткого кода  |
| **Шард** | Логическая часть базы данных, содержащая подмножество всех сокращённых ссылок |
| **Редирект** | HTTP-перенаправление пользователя с короткой ссылки на оригинальный URL |
| **ID генератор** | Сервис, отвечающий за создание глобально уникальных коротких кодов |
## Функциональные требования
Система должна предоставлять следующие функции:

## 3. Функциональные требования

### 3.1. Создание короткой ссылки
**Описание:** Пользователь предоставляет длинный URL и получает уникальную короткую ссылку.
**Требования:**
- Система должна принимать длинный URL через HTTP POST запрос
- Система должна генерировать уникальный короткий код
- Система должна сохранять соответствие между коротким кодом и длинным URL
- Система должна возвращать готовую короткую ссылку

### 3.2. Редирект по короткой ссылке
**Описание:** При переходе по короткой ссылке пользователь должен быть перенаправлен на оригинальный URL.
**Требования:**
- Система должна обрабатывать HTTP GET запросы к коротким кодам
- Система должна находить соответствующий длинный URL
- Система должна возвращать HTTP 302 Redirect на оригинальный URL
- Система должна обрабатывать случаи несуществующих коротких кодов (404 Not Found)

### 3.3. Веб-интерфейс
**Описание:** Пользователь должен иметь возможность взаимодействовать с сервисом через веб-браузер.
**Требования:**
- Система должна предоставлять веб-форму для ввода длинного URL
- Система должна отображать результат сокращения
- Система должна визуально подтверждать успешность операций

## 4. Ограничения

- Система работает только с HTTP/HTTPS URL
- Короткие коды генерируются только латинскими буквами и цифрами (a-z, A-Z, 0-9)
- Длина короткого кода фиксирована (6-8 символов)
- На первом этапе TTL (время жизни ссылок) не реализуется — все ссылки считаются вечными
- Система не требует аутентификации пользователей на MVP

## 5. Нефункциональные требования

### 5.1. Производительность
- Время ответа для операции редиректа: < 100 мс
- Время ответа для операции создания короткой ссылки: < 500 мс
- Система должна выдерживать пиковую нагрузку до 1000 операций редиректа в секунду

### 5.2. Масштабируемость
- Система должна поддерживать горизонтальное масштабирование за счёт шардирования
- Добавление новых шардов не должно требовать остановки системы

### 5.3. Надёжность
- Система должна оставаться доступной при отказе одного из узлов
- Потеря данных недопустима (требуется персистентное хранение)


## 6. Пользовательские сценарии

### 6.1. Сценарий: Создание короткой ссылки через веб-интерфейс
1. **Предусловие:** Пользователь открыл веб-страницу сервиса
2. **Основной поток:**
   - Пользователь вводит длинный URL в текстовое поле
   - Пользователь нажимает кнопку "Сократить"
   - Система проверяет валидность URL
   - Система генерирует короткий код и сохраняет соответствие
   - Система отображает готовую короткую ссылку
3. **Постусловие:** Пользователь может скопировать короткую ссылку

### 6.2. Сценарий: Редирект по короткой ссылке
1. **Предусловие:** Пользователь имеет валидную короткую ссылку
2. **Основной поток:**
   - Пользователь переходит по короткой ссылке в браузере
   - Система определяет шард, содержащий данный короткий код
   - Система находит соответствующий длинный URL
   - Система возвращает HTTP 302 Redirect
   - Браузер пользователя перенаправляется на оригинальный URL
3. **Альтернативный поток (ссылка не найдена):**
   - Система возвращает HTTP 404 Not Found
   - Пользователь видит страницу с сообщением об ошибке

## 7. Архитектура
---

## Технические сценарии

---

## План разработки и тестирования
